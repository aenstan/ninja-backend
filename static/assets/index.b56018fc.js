var e=Object.defineProperty,a=Object.defineProperties,s=Object.getOwnPropertyDescriptors,o=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable,r=(a,s,o)=>s in a?e(a,s,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[s]=o,c=(e,a)=>{for(var s in a||(a={}))t.call(a,s)&&r(e,s,a[s]);if(o)for(var s of o(a))n.call(a,s)&&r(e,s,a[s]);return e},l=(e,o)=>a(e,s(o));import{p as i,a as d,o as u,c as p,r as m,b as k,w as g,F as h,k as y,d as f,e as v,t as b,f as w,g as P,h as j,u as C,i as _,_ as A,j as x,l as I,m as L,n as S,q as T,s as U,v as V}from"./vendor.693923a3.js";i("data-v-4b23e37a"),d();const O={},z={class:"NinjaLogo",src:"/assets/logo.03d6d6da.png",alt:"logo"};O.render=function(e,a){return u(),p("img",z)};const D={components:{Logo:O}},N=g();i("data-v-1f23ce5f");const Q={class:"header"},R={class:"header-wrapper"},q={class:"flex items-center"},E=k("p",{class:"pl-3 select-none"},"Ninja",-1);d();const K=N(((e,a,s,o,t,n)=>{const r=m("Logo");return u(),p("div",Q,[k("div",R,[k("div",q,[k(r,{class:"h-10 w-10"}),E])])])}));D.render=K,D.__scopeId="data-v-1f23ce5f";const Z={class:"main"},$={expose:[],setup:e=>(e,a)=>{const s=m("router-view");return u(),p(h,null,[k(D),k("div",Z,[k(s)])],64)}};const B=y.create({prefixUrl:"/api",retry:{limit:1}});const J={setup(){const e=C();_();let a=f({nickName:void 0,timestamp:void 0,pushToken:""});const s=async()=>{try{const e=localStorage.getItem("eid");if(!e)return void o();const s=await function(e){const a=new URLSearchParams;return a.set("eid",e),B.get("userinfo",{searchParams:a}).json()}(e);if(!s)return A.error("获取用户信息失败，请重重新登录"),void o();a.nickName=s.data.nickName,a.timestamp=new Date(s.data.timestamp).toLocaleString(),a.pushToken=s.data.push_token}catch(e){console.error(e)}};v(s);const o=()=>{localStorage.removeItem("eid"),e.push("/login")};return l(c({},b(a)),{activity:[{name:"玩一玩（可找到大多数活动）",address:"京东 APP 首页-频道-边玩边赚",href:"https://funearth.m.jd.com/babelDiy/Zeus/3BB1rymVZUo4XmicATEUSDUgHZND/index.html"},{name:"宠汪汪",address:"京东APP-首页/玩一玩/我的-宠汪汪"},{name:"东东萌宠",address:"京东APP-首页/玩一玩/我的-东东萌宠"},{name:"东东农场",address:"京东APP-首页/玩一玩/我的-东东农场"},{name:"东东工厂",address:"京东APP-首页/玩一玩/我的-东东工厂"},{name:"东东超市",address:"京东APP-首页/玩一玩/我的-东东超市"},{name:"领现金",address:"京东APP-首页/玩一玩/我的-领现金"},{name:"东东健康社区",address:"京东APP-首页/玩一玩/我的-东东健康社区"},{name:"京喜农场",address:"京喜APP-我的-京喜农场"},{name:"京喜牧场",address:"京喜APP-我的-京喜牧场"},{name:"京喜工厂",address:"京喜APP-我的-京喜工厂"},{name:"京喜财富岛",address:"京喜APP-我的-京喜财富岛"},{name:"京东极速版红包",address:"京东极速版APP-我的-红包"}],getInfo:s,logout:o,delAccount:async()=>{try{const e=localStorage.getItem("eid"),a=await function(e){return B.post("delaccount",{json:e}).json()}({eid:e});200!==a.code?A.error(a.message):(A.success(a.message),setTimeout((()=>{o()}),1e3))}catch(e){console.error(e)}},uploadpushToken:async()=>{try{const s=localStorage.getItem("eid"),o=await(e={eid:s,push_token:a.pushToken},B.post("uploadpushtoken",{json:e}).json());200!==o.code?A.error(o.message):A.success(o.message)}catch(s){console.error(s)}var e},openUrlWithJD:e=>{const a=encodeURIComponent(`{"category":"jump","des":"m","action":"to","url":${e}}`);window.location.href=`openapp.jdmobile://virtual?params=${a}`}})}},W={class:"content"},F={class:"card"},H=k("div",{class:"card-header"},[k("p",{class:"card-title"},"个人中心")],-1),X={class:"card-body"},G={class:"card-footer"},M=x("退出登录"),Y=x("删除账号"),ee={class:"card"},ae=k("div",{class:"card-header"},[k("p",{class:"card-title"},"消息推送"),k("span",{class:"card-subtitle"},[x(" 请在下方输入您的 push plus token 测试后保存。 "),k("a",{class:"text-blue-400",href:"https://pushplus.plus/push1.html",target:"_blank"},"注册地址")])],-1),se={class:"card-body"},oe={class:"card-footer"},te=x("保存"),ne={class:"card"},re=k("div",{class:"card-header"},[k("p",{class:"card-title"},"常见活动位置"),k("span",{class:"card-subtitle"},"下面是一些常见活动的位置")],-1),ce={class:"card-body"},le={class:"pr-2"};J.render=function(e,a,s,o,t,n){const r=m("el-button"),c=m("el-input");return u(),p("div",W,[k("div",F,[H,k("div",X,[k("p",null,"昵称："+w(e.nickName),1),k("p",null,"更新时间："+w(e.timestamp),1)]),k("div",G,[k(r,{size:"small",auto:"",onClick:o.logout},{default:P((()=>[M])),_:1},8,["onClick"]),k(r,{type:"danger",size:"small",auto:"",onClick:o.delAccount},{default:P((()=>[Y])),_:1},8,["onClick"])])]),k("div",ee,[ae,k("div",se,[k(c,{modelValue:e.pushToken,"onUpdate:modelValue":a[1]||(a[1]=a=>e.pushToken=a),placeholder:"token",size:"small",clearable:"",class:"my-4 w-full"},null,8,["modelValue"])]),k("div",oe,[k(r,{type:"success",size:"small",auto:"",onClick:o.uploadpushToken},{default:P((()=>[te])),_:1},8,["onClick"])])]),k("div",ne,[re,k("div",ce,[k("ul",null,[(u(!0),p(h,null,j(o.activity,((e,a)=>(u(),p("li",{key:a,class:"leading-normal"},[k("span",null,w(e.name)+"：",1),k("span",le,w(e.address),1),e.href?(u(),p("a",{key:0,class:"text-blue-400",href:"#",onClick:a=>o.openUrlWithJD(e.href)},"直达链接",8,["onClick"])):I("",!0)])))),128))])])])])};const ie={setup(){const e=C();_();let a=f({marginCount:0,allowAdd:!0,cookie:"",QRCode:void 0,qrCodeVisibility:!1,token:void 0,okl_token:void 0,cookies:void 0,timer:void 0,waitLogin:!1});const s=async()=>{try{const e=(await B.get("info").json()).data;a.marginCount=e.marginCount,a.allowAdd=e.allowAdd}catch(e){console.error(e)}},o=async()=>{try{const s=await function(e){return B.post("check",{json:e}).json()}({token:a.token,okl_token:a.okl_token,cookies:a.cookies});switch(null==s?void 0:s.data.errcode){case 0:localStorage.setItem("eid",s.data.eid),A.success(s.message),clearInterval(a.timer),e.push("/");break;case 176:break;default:A.error(s.message),a.waitLogin=!1,clearInterval(a.timer)}}catch(s){clearInterval(a.timer),a.waitLogin=!1}};return v(s),l(c({},b(a)),{getInfo:s,getQrcode:async()=>{try{const e=await B.get("qrcode").json();a.token=e.data.token,a.okl_token=e.data.okl_token,a.cookies=e.data.cookies,a.QRCode=e.data.QRCode,a.QRCode&&(a.qrCodeVisibility=!0,a.waitLogin=!0,clearInterval(a.timer),a.timer=setInterval(o,3e3))}catch(e){console.error(e),A.error("生成二维码失败！请重试或放弃")}},ckeckLogin:o,jumpLogin:async()=>{const e=`openapp.jdmobile://virtual/ad?params={"category":"jump","des":"ThirdPartyLogin","action":"to","onekeylogin":"return","url":"https://plogin.m.jd.com/cgi-bin/m/tmauth?appid=300&client_type=m&token=${a.token}","authlogin_returnurl":"weixin://","browserlogin_fromurl":"localhost:3000"}`;window.location.href=e},CKLogin:async()=>{try{const e=a.cookie.match(/pt_key=(.*?);/)&&a.cookie.match(/pt_key=(.*?);/)[1],s=a.cookie.match(/pt_pin=(.*?);/)&&a.cookie.match(/pt_pin=(.*?);/)[1];if(e&&s){const a=await function(e){return B.post("cklogin",{json:e}).json()}({pt_key:e,pt_pin:s});200===a.code&&a.data.eid?(localStorage.setItem("eid",a.data.eid),A.success(a.message)):A.error(a.message||"cookie 解析失败，请检查后重试！")}else A.error("cookie 解析失败，请检查后重试！")}catch(e){console.error(e)}}})}},de={class:"content"},ue={class:"card"},pe={class:"card-header"},me={class:"flex items-center justify-between"},ke=k("p",{class:"card-title"},"扫码登录",-1),ge={class:"ml-2 px-2 py-1 bg-gray-200 rounded-full font-normal text-xs"},he=k("span",{class:"card-subtitle"}," 请使用京东 App 扫码登录（手机截图扫码）。升级提示不用管。 ",-1),ye={class:"card-body text-center"},fe=x("生成二维码"),ve=x("跳转到京东 App 登录"),be=k("div",{class:"card-footer"},null,-1),we={class:"card hidden"},Pe={class:"card-header"},je={class:"flex items-center justify-between"},Ce=k("p",{class:"card-title"},"CK 登录",-1),_e={class:"ml-2 px-2 py-1 bg-gray-200 rounded-full font-normal text-xs"},Ae=k("span",{class:"card-subtitle"}," 请在下方输入您的 cookie 登录。 ",-1),xe={class:"card-body text-center"},Ie=x("登录"),Le=k("div",{class:"card-footet"},null,-1);ie.render=function(e,a,s,o,t,n){const r=m("el-button"),c=m("el-input");return u(),p("div",de,[k("div",ue,[k("div",pe,[k("div",me,[ke,k("span",ge,"余量："+w(e.marginCount),1)]),he]),k("div",ye,[e.qrCodeVisibility?(u(),p("img",{key:0,src:e.QRCode,width:256,class:"m-auto"},null,8,["src"])):I("",!0),e.waitLogin?(u(),p(r,{key:2,type:"primary",size:"small",round:"",onClick:o.jumpLogin},{default:P((()=>[ve])),_:1},8,["onClick"])):(u(),p(r,{key:1,type:"primary",size:"small",round:"",onClick:o.getQrcode},{default:P((()=>[fe])),_:1},8,["onClick"]))]),be]),k("div",we,[k("div",Pe,[k("div",je,[Ce,k("span",_e,"余量："+w(e.marginCount),1)]),Ae]),k("div",xe,[k(c,{modelValue:e.cookie,"onUpdate:modelValue":a[1]||(a[1]=a=>e.cookie=a),size:"small",clearable:"",class:"my-4 w-full"},null,8,["modelValue"]),k(r,{type:"primary",size:"small",round:"",onClick:o.CKLogin},{default:P((()=>[Ie])),_:1},8,["onClick"])]),Le])])};const Se=[{path:"/",component:J},{path:"/login",component:ie}],Te=L({history:S(),routes:Se}),Ue=[U,V,A],Ve=[A],Oe=T($);Ue.forEach((e=>{Oe.component(e.name,e)})),Ve.forEach((e=>{Oe.use(e)})),Oe.use(Te),Oe.mount("#app");
